# LaTeX产出的PDF修复

我们知道，原生的TeX和LaTeX并不支持非8位编码。甚至今天pdfTeX的底子还是8位的。

从九十年代开始，CJK编码以及字体的支持，前人使用了诸多方案。现在可以认为有三大体系：pTeX，XeTeX和LuaTeX。

我推荐使用这几个引擎来生成PDF。一般来说，版本越新支持度就越好。

但如果需要编译老文档，尤其是存量特别大的，那可能还得用比较旧的系统。由于不同年代的TeX几乎都没有什么运行上的问题，所以只要安装对应的旧版本TeX即可。

对于一些更老的文档，甚至很多时候都只有PDF了，如果有一些数字化的需求，就会有些棘手。

这几年AI的技术进步，有目共睹。让这类需要用眼睛瞪的问题，变得更简单了。

基于PDF的资料整理，有时候需要复制出文本来。那么很多人可能就会发现，这些特别老的PDF文件并不能复制出他们想要的东西。

这一点比较好理解：当年很多PDF就是用来打印或者预览的，能不能复制，并不在需求之列。有些人总会用今天的需求来责难昨天的实现。这并不合理。实际上，这种都算是新需求了。

这类PDF修复的办法相当直接：给PDF中的Font对象，映射一组Unicode值就行。用PDF的术语来说，就是ToUnicode。

最近修复的，大致上是有两种。

一种是PFB格式的。由于格式需求，这类字体内往往能够提取到Unicode信息，这就需要解析字体并转换出来。

另一种是TTF格式的。这类有两个办法。一个是做outline的比较，需要知道字体的来源，速度极快。另一个是使用OCR库，速度可快可慢，这就有一定的错误率。
